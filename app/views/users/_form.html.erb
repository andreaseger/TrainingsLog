<% semantic_form_for @user do |f| %>
  <% f.inputs do %>
    <%= f.input :username %>
    <%= f.input :email %>
    <% if @user.openid_identifier.blank? %>
      <%= f.input :password %>
      <%= f.input :password_confirmation %>
      <%= f.buttons %>
    <h3> Or use OpenID </h3>
    <% end %>
    <%= f.input :openid_identifier, :label => 'OpenID URL' %>  
  <% end %>
 <%= f.buttons %>
<% end %>

<!--
<% form_for @user do |f| %>
  <%= f.error_messages %>
  <p>
    <%= f.label :username %><br />
    <%= f.text_field :username %>
  </p>
  <p>
    <%= f.label :email %><br />
    <%= f.text_field :email %>
  </p>
  
  <% if @user.openid_identifier.blank? %>
    <p>
      <%= f.label :password %><br />
      <%= f.password_field :password %>
    </p>
    <p>
      <%= f.label :password_confirmation %><br />
      <%= f.password_field :password_confirmation %>
    </p>
    <p><%= f.submit "Submit" %></p>

    <h2>Or use OpenID</h2>
  <% end %>

  <p>
    <%= f.label :openid_identifier, "OpenID URL" %><br />
    <%= f.text_field :openid_identifier %>
  </p>
  <p><%= f.submit "Submit" %></p>

<% end %>

-->
